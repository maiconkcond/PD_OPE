var meuApp=angular.module("meuApp",[]);meuApp.controller("principal",function(o){o.estoqueProd=[{nome:"agua",valor:30,qtd:2},{nome:"suco",valor:20,qtd:1}],o.$watchCollection("estoqueProd",function(){o.total=0,angular.forEach(o.estoqueProd,function(e){o.total+=e.qtd*e.valor})}),o.addProd=function(){$.ajax({type:"GET",url:"http://localhost:3000/home/jsonValor/"+o.estoque,dataType:"json",success:function(e){o.nome=e.nome,o.valor=e.valor_venda,o.estoqueProd.push({nome:o.nome,valor:o.valor,qtd:o.qtd}),o.estoque="",o.nome="",o.valor="",o.qtd=""}})}}),meuApp.controller("atualiza",function(o,e){var a=0;e(function(){o.message="testando contagem para refresh da div = "+a,a++},1e3)});